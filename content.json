{"pages":[{"title":"","text":"","link":"/album/index.html"},{"title":"","text":"ä¸ªäººç®€ä»‹ åˆ†äº«å¾ˆå–œæ¬¢çš„è€ç½—çš„ä¸€æ®µè¯ï¼š â€œæ¯ä¸€ä¸ªç”Ÿå‘½æ¥åˆ°ä¸–é—´éƒ½æ³¨å®šæ”¹å˜ä¸–ç•Œï¼Œåˆ«æ— é€‰æ‹©ã€‚è¦ä¹ˆå˜å¾—å¥½ä¸€ç‚¹ï¼Œè¦ä¹ˆå˜å¾—åä¸€ç‚¹ã€‚ä½ å¦‚æœèµ°è¿›ç¤¾ä¼šä¸ºäº†ç”Ÿå­˜ä¸ºäº†ä»€ä¹ˆä¸è¦è„¸çš„ç†ç”±ï¼Œå˜æˆäº†ä¸€ä¸ªæ¶å¿ƒçš„æˆå¹´äººç¤¾ä¼šä¸­çš„ä¸€å‘˜ï¼Œé‚£ä½ å°±æŠŠè¿™ä¸ªä¸–ç•Œå˜å¾—æ¶å¿ƒäº†ä¸€ç‚¹ç‚¹ã€‚å¦‚æœä½ ä¸€ç”Ÿåˆšæ­£ä¸é˜¿ï¼Œå¦‚æœä½ ä¸€ç”Ÿè€¿ç›´ï¼Œæ²¡æœ‰åšä»»ä½•æ¶å¿ƒçš„äº‹æƒ…ï¼Œæ²¡åšå¯¹åˆ«äººæœ‰å®³çš„äº‹æƒ…ï¼Œä¸€è¾ˆå­æ‹¼äº†è€å‘½å‹‰å¼ºæŠŠè‡ªå·±èº«è¾¹çš„å‡ ä¸ªäººç…§é¡¾å¥½äº†ï¼Œæ²¡æœ‰æˆåæ²¡æœ‰å‘è´¢ï¼Œæ²¡æœ‰æˆå°±ä¼Ÿå¤§çš„äº‹ä¸šï¼Œç„¶åè€¿ç€è„–å­ä¸€ç”Ÿæ­£ç›´ï¼Œåˆ°äº†ä¸ƒå…«åå²è€¿ç€è„–å­å»ä¸–äº†ã€‚ä½ è¿™ä¸€ç”Ÿæ˜¯ä¸æ˜¯æ²¡æœ‰æ”¹å˜ä¸–ç•Œï¼Ÿä½ è¿˜æ˜¯æ”¹å˜ä¸–ç•Œäº†ï¼Œä½ æŠŠè¿™ä¸ªä¸–ç•Œå˜å¾—ç¾å¥½äº†ä¸€ç‚¹ç‚¹ã€‚å› ä¸ºä¸–ç•Œä¸Šåˆå¤šäº†ä¸€ä¸ªå¥½äººã€‚â€œ å–„æ¶ç»ˆæœ‰æŠ¥,å¤©é“å¥½è½®å›ã€‚ä¸ä¿¡æŠ¬å¤´çœ‹,è‹å¤©é¥¶è¿‡è°ã€‚æ— è®ºä½•æ—¶ä½•åœ°ï¼Œæˆ‘ä»¬éƒ½è¦ä¿æŒä¸€é¢—ç§¯æä¹è§‚ã€å–„è‰¯æ„Ÿæ©çš„å¿ƒã€‚ä½†è¡Œå¥½äº‹è«é—®å‰ç¨‹ï¼Œæ°¸è¿œå¹´è½»ï¼Œæ°¸è¿œçƒ­å†…ç›ˆçœ¶ï¼Œæ°¸è¿œä¿æŒæ­£èƒ½é‡ã€‚ğŸ’ªğŸ’ªğŸ’ªğŸ’ªğŸ’ªğŸ’ªå†²é¸­ï¼ï¼ï¼ï¼ -&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;ä¸ªäººä¿¡æ¯ï¼šè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ä¸“ä¸šä»äº‹Androidç§»åŠ¨å¼€å‘ åšå®¢ä¿¡æ¯ ç½‘ç«™ä¸»é¢˜ä¸ºamazingï¼Œå…¶åŸä¸»é¢˜ä¸ºIcarusä¸»é¢˜ è¿½æ±‚å°½å¯èƒ½çš„ç®€æ´ï¼Œæ¸…æ™°ï¼Œæ˜“ç”¨ã€‚ æ›´æ–°æ—¥å¿—ï¼šâ€“2021.06.25ï¼šåˆ›å»ºåšå®¢","link":"/about/index.html"},{"title":"","text":"&nbsp;&nbsp;å¬å¬éŸ³ä¹ éŸ³ä¹æ’­æ”¾å™¨ç”±mePlayeræä¾›ï¼Œå¸ƒå±€å‚ç…§ç½‘å‹åšå®¢æ‰€ä½œï¼Œæ„Ÿè°¢ä½œè€…çš„è¾›å‹¤ä»˜å‡ºã€‚æ›´å¤šéŸ³ä¹åˆ†äº«è¯·æŸ¥çœ‹æ­Œå•ã€‚ &nbsp;&nbsp;çœ‹çœ‹è§†é¢‘ ->ç‚¹å‡»ä»¥ä¸‹æ¡ç›®å¼€å§‹æ’­æ”¾è§†é¢‘,å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š","link":"/media/index.html"},{"title":"","text":"ç”³è¯·å‹é“¾é¡»çŸ¥ åŸåˆ™ä¸Šåªå’ŒæŠ€æœ¯ç±»åšå®¢äº¤æ¢ï¼Œä½†ä¸åŒ…æ‹¬å«æœ‰å’Œè‰²æƒ…ã€æš´åŠ›ã€æ”¿æ²»æ•æ„Ÿçš„ç½‘ç«™ã€‚ ä¸å’Œå‰½çªƒã€ä¾µæƒã€æ— è¯šä¿¡çš„ç½‘ç«™äº¤æ¢ï¼Œä¼˜å…ˆå’Œå…·æœ‰åŸåˆ›ä½œå“çš„ç½‘ç«™äº¤æ¢ã€‚ ç”³è¯·è¯·æä¾›ï¼šç«™ç‚¹åç§°ã€ç«™ç‚¹é“¾æ¥ã€ç«™ç‚¹æè¿°ã€logoæˆ–å¤´åƒï¼ˆä¸è¦è®¾ç½®é˜²ç›—é“¾ï¼‰ã€‚ æ’åä¸åˆ†å…ˆåï¼Œåˆ·æ–°åé‡æ’ï¼Œæ›´æ–°ä¿¡æ¯åè¯·ç•™è¨€å‘ŠçŸ¥ã€‚ ä¼šå®šæœŸæ¸…ç†å¾ˆä¹…å¾ˆä¹…ä¸æ›´æ–°çš„ã€ä¸ç¬¦åˆè¦æ±‚çš„å‹é“¾ï¼Œä¸å†å¦è¡Œé€šçŸ¥ã€‚ æœ¬ç«™ä¸å­˜å‚¨å‹é“¾å›¾ç‰‡ï¼Œå¦‚æœå‹é“¾å›¾ç‰‡æ¢äº†æ— æ³•æ›´æ–°ã€‚å›¾ç‰‡è£‚äº†çš„ä¼šæ›¿æ¢æˆé»˜è®¤å›¾ï¼Œéœ€è¦æ›´æ¢çš„è¯·ç•™è¨€å‘ŠçŸ¥ã€‚ æœ¬ç«™å‹é“¾ä¿¡æ¯å¦‚ä¸‹ï¼Œç”³è¯·å‹é“¾å‰è¯·å…ˆæ·»åŠ æœ¬ç«™ä¿¡æ¯ï¼š ç½‘ç«™å›¾æ ‡ï¼šhttps://gitee.com/GP9/pic-rep/raw/master/img/logo.jpg ç½‘ç«™åç§°ï¼šå¹³å¹³çš„é©¬è·¯ ç½‘ç«™åœ°å€ï¼šhttps://blockh.github.io ç½‘ç«™ç®€ä»‹ï¼šCoding the world åŠ è½½ä¸­ï¼Œç¨ç­‰å‡ ç§’...","link":"/friend/index.html"},{"title":"","text":"æ¥è€Œä¸å¾€éç¤¼ä¹Ÿç•…æ‰€æ¬²è¨€ï¼Œæœ‰ç•™å¿…åº”","link":"/message/index.html"},{"title":"éŸ³ä¹æ­Œå•æ”¶è—","text":"æ¸©é¦¨æç¤ºï¼šé€‰æ‹©å–œæ¬¢çš„éŸ³ä¹åŒå‡»æ’­æ”¾ï¼Œç”±äºç‰ˆæƒåŸå› éƒ¨åˆ†ä¸èƒ½æ’­æ”¾ã€‚å¦‚æœå–œæ¬¢æ­Œå•æ”¶è—ä¸€ä¸‹ï¼Œå»ç½‘æ˜“äº‘éƒ½èƒ½æ’­æ”¾å“Ÿï¼","link":"/music/index.html"},{"title":"","text":"ç¢ç¢å¿µ tipsï¼šgithubç™»å½•åæŒ‰æ—¶é—´æ­£åºæŸ¥çœ‹ã€å¯ç‚¹èµåŠ â¤ï¸ã€æœ¬æ’ä»¶åœ°å€..ã€Œ+99æ¬¡æŸ¥çœ‹ã€ ç¢ç¢å¿µåŠ è½½ä¸­ï¼Œè¯·ç¨ç­‰... $.getScript(\"/js/gitalk_self.min.js\", function () { var gitalk = new Gitalk({ clientID: 'e1499f734d835660ddff', clientSecret: 'b655baa951b1817cb47f173e1b337b1f47cb57d2', id: 'Pinguoooo', repo: 'blog_comment', owner: 'blockh', admin: \"blockh\", createIssueManually: true, distractionFreeMode: false }); gitalk.render('comment-container1'); });","link":"/self-talking/index.html"}],"posts":[{"title":"Android-ä½¿ç”¨å‹ç›Ÿåˆ†äº«å¾®ä¿¡å°ç¨‹åºåˆ°å¾®ä¿¡","text":"Androidä½¿ç”¨å‹ç›Ÿåˆ†äº«å¾®ä¿¡å°ç¨‹åºåˆ°å¾®ä¿¡åœ¨å‹ç›Ÿå®˜ç½‘ä¸Šçœ‹åˆ°äº†ç›¸å…³çš„APIï¼Œä½†æ˜¯æ€»æ˜¯æ— æ³•æ­£å¸¸è°ƒç”¨ï¼Œä¸‹é¢è®°å½•ä¸‹è‡ªå·±çš„å¤„ç†æµç¨‹ï¼š å¼•å…¥ä¾èµ–12345implementation 'com.umeng.umsdk:common:2.2.5'implementation 'com.umeng.umsdk:share-core:7.0.2'implementation 'com.umeng.umsdk:share-board:7.0.2'//ä¸ºæ”¯æŒå¾®ä¿¡åˆ†äº«çš„æ¨¡å—implementation 'com.umeng.umsdk:share-wx:7.0.2' æ·»åŠ æ‰€éœ€æƒé™ï¼Œåˆ›å»ºå¾®ä¿¡æ‰€éœ€çš„Activityè¯·åœ¨AndroidManifestä¸­æ·»åŠ å¦‚ä¸‹æƒé™ 12345&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;&gt;&lt;/uses-permission&gt;&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;&gt;&lt;/uses-permission&gt;&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;&gt;&lt;/uses-permission&gt;&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;&gt;&lt;/uses-permission&gt;&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;&gt;&lt;/uses-permission&gt; å¹¶åœ¨AndroidManifestä¸­æ·»åŠ å¦‚ä¸‹ä»£ç (éœ€è¦æå‰åˆ›å»ºå¥½Activity)ï¼š 1234567&lt;activity android:configchanges=&quot;keyboardHidden|orientation|screenSize&quot; android:exported=&quot;true&quot; android:launchmode=&quot;singleTask&quot; android:name=&quot;.wxapi.WXEntryActivity&quot; android:taskaffinity=&quot;net.sourceforge.simcpux&quot; android:theme=&quot;@android:style/Theme.Translucent.NoTitleBar&quot;&gt;&lt;/activity&gt; åœ¨ä½ çš„é¡¹ç›®åŒ…ä¸­åˆ›å»ºwxapiåŒ…ï¼Œå¹¶åˆ›å»ºWXEntryActivity.class 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class WXEntryActivity extends WXCallbackActivity implements IWXAPIEventHandler { private IWXAPI wxapi= BaseApplication.getInstance().getWxApi(); @Override protected void onNewIntent(Intent intent) { super.onNewIntent(intent); setIntent(intent); wxapi.handleIntent(intent, this); } @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); wxapi.handleIntent(getIntent(), this); } @Override public void onReq(BaseReq baseReq) { LogUtils.d(baseReq:+baseReq.openId); } @Override public void onResp(BaseResp baseResp) { if (baseResp.getType()==ConstantsAPI.COMMAND_SENDMESSAGE_TO_WX){ finish(); }else if(baseResp.getType()==ConstantsAPI.COMMAND_SENDAUTH){ LogUtils.d(è¿”å›æˆæƒ+baseResp.errCode); switch (baseResp.errCode) { case BaseResp.ErrCode.ERR_OK: LogUtils.d(è¿”å›Codeï¼š+((SendAuth.Resp) baseResp).code); EventBus.getDefault().post(new EventMessage(CodeManager.BIND_PHONE,((SendAuth.Resp) baseResp).code)); break; case BaseResp.ErrCode.ERR_USER_CANCEL: case BaseResp.ErrCode.ERR_AUTH_DENIED: case BaseResp.ErrCode.ERR_UNSUPPORT: break; } finish(); } } } ç”±äºæˆ‘åœ¨é¡¹ç›®ä¸­é›†æˆäº†å…¶ä»–å¾®ä¿¡ç›¸å…³çš„SDKï¼Œè¯»è€…åªç”¨å…³æ³¨è¿™ä¸ª WXEntryActivityéœ€è¦ç»§æ‰¿ WXCallbackActivity ä»¥åŠå®ç° IWXAPIEventHandler è¿™ä¸¤ä¸ªç±»ã€‚ åœ¨è‡ªå®šä¹‰çš„ BaseApplication çš„ onCreate æ–¹æ³•ä¸­éœ€è¦æ³¨å†Œå‹ç›Ÿ1234567891011121314151617181920 ... @Override public void onCreate() { super.onCreate(); initUmeng(); }private void initUmeng() { // åœ¨æ­¤å¤„è°ƒç”¨åŸºç¡€ç»„ä»¶åŒ…æä¾›çš„åˆå§‹åŒ–å‡½æ•° ç›¸åº”ä¿¡æ¯å¯åœ¨åº”ç”¨ç®¡ç† -&gt; åº”ç”¨ä¿¡æ¯ ä¸­æ‰¾åˆ° http://message.umeng.com/list/apps // å‚æ•°ä¸€ï¼šå½“å‰ä¸Šä¸‹æ–‡contextï¼› // å‚æ•°äºŒï¼šåº”ç”¨ç”³è¯·çš„Appkeyï¼› // å‚æ•°ä¸‰ï¼šæ¸ é“åç§°ï¼› // å‚æ•°å››ï¼šè®¾å¤‡ç±»å‹ï¼Œå¿…é¡»å‚æ•°ï¼Œä¼ å‚æ•°ä¸ºUMConfigure.DEVICE_TYPE_PHONEåˆ™è¡¨ç¤ºæ‰‹æœºï¼›ä¼ å‚æ•°ä¸ºUMConfigure.DEVICE_TYPE_BOXåˆ™è¡¨ç¤ºç›’å­ï¼›é»˜è®¤ä¸ºæ‰‹æœºï¼› // å‚æ•°äº”ï¼šPushæ¨é€ä¸šåŠ¡çš„secret å¡«å……Umeng Message Secretå¯¹åº”ä¿¡æ¯ï¼ˆéœ€æ›¿æ¢ï¼‰ UMConfigure.init(this, åº”ç”¨åœ¨å‹ç›Ÿç”³è¯·çš„Appkey, Umeng, UMConfigure.DEVICE_TYPE_PHONE, æ²¡æœ‰ä½¿ç”¨æ¨é€æœåŠ¡ï¼Œä¼ ç©ºå­—ç¬¦ä¸²å°±è¡Œ); //å¼€é€šå¾®ä¿¡åˆ†äº« ç¬¬ä¸€ä¸ªå€¼ä¸ºappåœ¨å¾®ä¿¡æ³¨å†Œæ—¶çš„AppID ç¬¬äºŒä¸ªå€¼æ˜¯ä½ ä»¬è½¯ä»¶æ³¨å†Œæ—¶çš„AppSecret PlatformConfig.setWeixin(wx*************, *******AppSecret****);} æ³¨æ„ï¼è¿™é‡Œä¸€å®šè¦æ·»åŠ å¼€é€šå¾®ä¿¡åˆ†äº«çš„ä»£ç ï¼Œå¦åˆ™ç‚¹å‡»åˆ†äº«æŒ‰é’®å°†æ²¡æœ‰ä»»ä½•ååº”ï¼ï¼ï¼ PlatformConfig.setWeixin(&quot;wx*************&quot;, &quot;*******AppSecret****&quot;); åˆ†äº«å°ç¨‹åºåˆ°å¾®ä¿¡æˆ‘å°†åˆ†äº«é€»è¾‘æ”¾åœ¨å¼¹çª—ç‚¹å‡»äº‹ä»¶é‡Œ 12345678910111213141516171819202122232425262728293031323334353637383940414243private void showShareDialog(DistributionMyGoodsBean.ListBean listBean) { //åˆ†äº« ShareDialog shareDialog = new ShareDialog(mContext, false); shareDialog.setOnButtonListener(new ShareDialog.OnButtonListener() { @Override public void onWeChatClick() { ToastUtils.showShort(å¾®ä¿¡åˆ†äº«); //å…¼å®¹ä½ç‰ˆæœ¬çš„ç½‘é¡µé“¾æ¥ UMMin umMin = new UMMin(ä½ æƒ³è¦å…¼å®¹çš„ç½‘é¡µé“¾æ¥ï¼Œéœ€è¦å¸¦ä¸Šhttp://); // å°ç¨‹åºæ¶ˆæ¯å°é¢å›¾ç‰‡ umMin.setThumb(new UMImage(mContext, listBean.getImage())); // å°ç¨‹åºæ¶ˆæ¯title umMin.setTitle(listBean.getTitle()); //å°ç¨‹åºé¡µé¢è·¯å¾„ umMin.setPath(/pages/å°ç¨‹åºå¯¹åº”çš„é¡µé¢é“¾æ¥); //å°ç¨‹åºåŸå§‹id,åœ¨å¾®ä¿¡å¹³å°æŸ¥è¯¢ umMin.setUserName(gh_***********); //è®¾ç½®å°ç¨‹åºç‰ˆæœ¬ //é¢„è§ˆç‰ˆ Config.setMiniPreView(); //æµ‹è¯•ç‰ˆ Config.setMiniTest(); new ShareAction((Activity) mContext) .setPlatform(SHARE_MEDIA.WEIXIN) .withMedia(umMin) .setCallback(shareListener) .share(); } @Override public void onCircleFriendsClick() { //å°ç¨‹åºç›®å‰æ— æ³•åˆ†äº«å°ç¨‹åºåˆ°æœ‹å‹åœˆ } }); shareDialog.show();} æ³¨æ„ï¼šåœ¨åˆ†äº«å°ç¨‹åºä¹‹å‰æ˜¯å¿…é¡»è¦è®¾ç½®å°ç¨‹åºçš„ç‰ˆæœ¬çš„ï¼Œä¸ç„¶ç‚¹å¼€å¾®ä¿¡é“¾æ¥ä¼šæŠ¥é”™","link":"/2021/06/25/Android-%E4%BD%BF%E7%94%A8%E5%8F%8B%E7%9B%9F%E5%88%86%E4%BA%AB%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%B0%E5%BE%AE%E4%BF%A1/"},{"title":"Android-åŸºç±»PopupWindowåˆ›å»ºåŠä½¿ç”¨","text":"BasePopupWindowä¸»è¦åŠŸèƒ½ å®ç°äº†å¼¹å‡ºæ—¶èƒŒæ™¯åŠé€æ˜æ•ˆæœ å®ç° BasePopupWindow.java 12345678910111213141516171819202122232425262728public class BasePopupWindow extends PopupWindow { private Activity activity; public BasePopupWindow(Activity activity) { this.activity = activity; } /** * è®¾ç½®é¡µé¢çš„é€æ˜åº¦ * @param bgAlpha 1è¡¨ç¤ºä¸é€æ˜ */ public void setBackgroundAlpha(float bgAlpha) { WindowManager.LayoutParams lp = activity.getWindow().getAttributes(); lp.alpha = bgAlpha; if (bgAlpha == 1) { activity.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);//ä¸ç§»é™¤è¯¥Flagçš„è¯,åœ¨æœ‰è§†é¢‘çš„é¡µé¢ä¸Šçš„è§†é¢‘ä¼šå‡ºç°é»‘å±çš„bug } else { activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);//æ­¤è¡Œä»£ç ä¸»è¦æ˜¯è§£å†³åœ¨åä¸ºæ‰‹æœºä¸ŠåŠé€æ˜æ•ˆæœæ— æ•ˆçš„bug } activity.getWindow().setAttributes(lp); } public void onDismiss() { if (activity != null) { setBackgroundAlpha(1f); } }} ä¾‹å­ å®ç°é€‰æ‹©è½¦è¾†çš„å¼¹å‡ºé€‰æ‹©æ¡† TruckPop.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102import android.app.Activity;import android.graphics.Color;import android.graphics.drawable.ColorDrawable;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.TextView;import androidx.annotation.NonNull;import androidx.recyclerview.widget.LinearLayoutManager;import androidx.recyclerview.widget.RecyclerView;import com.chad.library.adapter.base.BaseQuickAdapter;import com.chad.library.adapter.base.listener.OnItemClickListener;import com.hhkj.mcb.R;import com.hhkj.mcb.common.ui.bean.CarBean;import com.hhkj.mcb.seller.callbuy.adapter.TruckAdapter;import java.util.List;import butterknife.BindView;import butterknife.ButterKnife;/** * @ClassName: TruckPop * @Description: * @Author: pinguoooo * @Date: 2020/12/11 13:57 */public class TruckPop extends BasePopupWindow { @BindView(R.id.rv_truck) RecyclerView rvTruck; private final View view; private Activity activity; private List&lt;CarBean&gt; carBeanList; private TruckAdapter truckAdapter; private OnSelectedListener onSelectedListener; private int selectIndex = 0; public TruckPop(Activity activity, int height, List&lt;CarBean&gt; carBeanList) { this(activity,height,carBeanList,0); } public TruckPop(Activity activity, int height, List&lt;CarBean&gt; carBeanList, int selectIndex) { super(activity); this.activity = activity; this.carBeanList = carBeanList; this.selectIndex = selectIndex; setOutsideTouchable(true); setFocusable(true); setWidth(ViewGroup.LayoutParams.MATCH_PARENT); setHeight(height); setBackgroundDrawable(new ColorDrawable(0x30000000)); view = LayoutInflater.from(activity).inflate(R.layout.pop_truck, null); setContentView(view); ButterKnife.bind(this, view); initView(); } private void initView() { view.setOnClickListener(view -&gt; { dismiss(); }); rvTruck.setLayoutManager(new LinearLayoutManager(activity)); rvTruck.setAdapter(truckAdapter = new TruckAdapter(R.layout.truck_item,selectIndex)); View headerView = LayoutInflater.from(activity).inflate(R.layout.truck_item, null); TextView header = headerView.findViewById(R.id.tv_carNumber); headerView.setBackgroundColor(Color.WHITE); header.setText(&quot;å…¨éƒ¨&quot;); header.setTextColor(Color.parseColor(&quot;#31C863&quot;)); truckAdapter.addHeaderView(headerView); truckAdapter.setList(carBeanList); truckAdapter.setOnItemClickListener(new OnItemClickListener() { @Override public void onItemClick(@NonNull BaseQuickAdapter&lt;?, ?&gt; adapter, @NonNull View view, int position) { CarBean carBean = (CarBean) adapter.getData().get(position); truckAdapter.setSelectIndex(position); if (onSelectedListener != null) { onSelectedListener.onSelect(carBean, position); } } }); } public interface OnSelectedListener { void onSelect(CarBean carBean, int position); } public OnSelectedListener getOnSelectedListener() { return onSelectedListener; } public void setOnSelectedListener(OnSelectedListener onSelectedListener) { this.onSelectedListener = onSelectedListener; }} pop_truck.xml 123456789101112131415&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot;&gt; &lt;androidx.recyclerview.widget.RecyclerView android:id=&quot;@+id/rv_truck&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; app:layout_constraintEnd_toEndOf=&quot;parent&quot; app:layout_constraintStart_toStartOf=&quot;parent&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt; TruckAdapter.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import android.graphics.Color;import com.blankj.utilcode.util.ToastUtils;import com.chad.library.adapter.base.BaseQuickAdapter;import com.chad.library.adapter.base.viewholder.BaseViewHolder;import com.hhkj.mcb.R;import com.hhkj.mcb.common.ui.bean.CarBean;import org.jetbrains.annotations.NotNull;import org.jetbrains.annotations.Nullable;import java.util.List;/** * @ClassName: PickUpAdapter * @Description: * @Author: pinguoooo * @Date: 2020/11/9 11:29 */public class TruckAdapter extends BaseQuickAdapter&lt;CarBean, BaseViewHolder&gt; { private int selectIndex; public TruckAdapter(int layoutResId, @Nullable List&lt;CarBean&gt; data, int selectIndex) { super(layoutResId, data); this.selectIndex = selectIndex; } public TruckAdapter(int layoutResId, int selectIndex) { super(layoutResId); this.selectIndex = selectIndex; ToastUtils.showShort(selectIndex); } @Override protected void convert(@NotNull BaseViewHolder baseViewHolder, CarBean carBean) { //å› ä¸ºæ·»åŠ äº†åˆ—è¡¨å¤´éƒ¨ï¼Œåœ¨è·å–ä½ç½®ç´¢å¼•æ—¶éœ€è¦ -1 if (selectIndex == baseViewHolder.getLayoutPosition() - 1) { //LogUtils.d(&quot;layoutPosition:&quot; + baseViewHolder.getLayoutPosition()); baseViewHolder.itemView.setBackgroundColor(Color.WHITE); baseViewHolder.setTextColor(R.id.tv_carNumber, Color.parseColor(&quot;#31C863&quot;)); } else { baseViewHolder.itemView.setBackgroundColor(Color.parseColor(&quot;#F7F7F7&quot;)); baseViewHolder.setTextColor(R.id.tv_carNumber, Color.parseColor(&quot;#666666&quot;)); } } public void setSelectIndex(int selectIndex) { this.selectIndex = selectIndex; //LogUtils.d(&quot;selectIndex:&quot; + selectIndex); notifyDataSetChanged(); } public int getSelectIndex() { return selectIndex; }} æ•ˆæœå¦‚ä¸‹","link":"/2021/06/25/Android-%E5%9F%BA%E7%B1%BBPopupWindow%E5%88%9B%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/"},{"title":"Android-å¤„ç†å¤šå±‚Viewpageræ»‘åŠ¨å†²çª","text":"å¤„ç†å¤šå±‚ViewPageåµŒå¥—äº§ç”Ÿæ»‘åŠ¨å†²çªçš„é—®é¢˜åœºæ™¯åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€ä¸‹ç±»ä¼¼çš„åµŒå¥—æ•ˆæœï¼ŒViewPagerä»ä¸»é¡µå¯ä»¥ä¸€ç›´å³æ»‘ç»è¿‡æ¯ä¸ªé¡µé¢ã€‚ 123456789graph LRA(MainActivity: BottomNavigationView + ViewPager)--&gt;B1(ä¸»é¡µ : TabLayout + ViewPager)A--&gt;B2(å‘ç° : TabLayout + ViewPager)A--&gt;B3(æˆ‘çš„ : æ™®é€šå¸ƒå±€)B1--&gt;C1(tab1 : TabLayout + ViewPager)--&gt;RecycleView1--&gt;items1B1--&gt;C2(tab1 : TabLayout + ViewPager)--&gt;RecycleView2--&gt;items2B1--&gt;C3(tab1 : TabLayout + ViewPager)--&gt;RecycleView3--&gt;items3B2--&gt;D1(tab1....)B3--&gt;E1(å†…å®¹) æ•ˆæœå›¾ å®é™…å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€ç¬¬ä¸€æ—¶é—´æƒ³åˆ°åµŒå¥—ä»¥ä¸Šç±»ä¼¼å¸ƒå±€ç›´æ¥å®ç°æƒ³è¦çš„æ•ˆæœã€‚ä½†æ€»æ˜¯ä¼šå‡ºç°è«åå¥‡å¦™çš„é—ªé€€æ•ˆæœï¼ŒæŠ›æ•°ç»„è¶Šç•Œå¼‚å¸¸ï¼Œå…¶å®é—®é¢˜å°±å‡ºç°åœ¨åµŒå¥—çš„ViewPagerå·¦å³æ»‘åŠ¨æ—¶ï¼Œå­Viewpageråˆ’åˆ°æœ€å³ä¸€é¡µç»§ç»­æ»‘åŠ¨æ—¶ï¼ŒViewpagerå¹¶ä¸ä¼šå§è§¦æ‘¸äº‹ä»¶äº¤ç»™çˆ¶ViewPagerå“åº”ï¼Œè€Œæ­¤æ—¶çš„å­ViewPagerå·²ç»åˆ°äº†æœ«å°¾ä¸€é¡µï¼Œç»§ç»­å³æ»‘è°ƒç”¨ä¸‹ä¸€é¡µå½“ç„¶ä¼šæŠ›è¶Šç•Œå¼‚å¸¸ã€‚ è§£å†³å…¶å®è¿™ä¸ªé—®é¢˜å¾ˆå¥½è§£å†³ï¼Œæ ¸å¿ƒæ€æƒ³å°±æ˜¯é‡å†™å­ViewPagerçš„è§¦æ‘¸ç›‘å¬äº‹ä»¶ï¼Œå½“å­ViewPageråœ¨é¦–é¡µå‘å·¦æ»‘åŠ¨æˆ–æœ«å°¾é¡µå‘å³æ»‘åŠ¨æ—¶ï¼Œè§¦æ‘¸å“åº”äº¤ç»™çˆ¶ViewPageræ¥å¤„ç†ã€‚ å°†åŸæœ¬çš„å­ViewPageræ”¹ä¸ºè‡ªå®šä¹‰çš„ ChildViewPager.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566/** * @ClassName: ChildViewPager * @Description: * @Author: pinguoooo * @Date: 2020/8/12 9:49 */public class ChildViewPager extends ViewPager { int startX; int startY; public ChildViewPager(@NonNull Context context) { super(context); } public ChildViewPager(@NonNull Context context, @Nullable AttributeSet attrs) { super(context, attrs); } @Override public boolean dispatchTouchEvent(MotionEvent ev) { //é¡µé¢å½“å‰ä½ç½® int currentPosition; //æ€»é¡µæ•° int count = Objects.requireNonNull(getAdapter()).getCount(); switch (ev.getAction()) { case MotionEvent.ACTION_DOWN: startX = (int) ev.getRawX(); //startY = (int) ev.getY(); //ç”³è¯·è®©çˆ¶View ä¸è¦æ‹¦æˆªè§¦æ‘¸äº‹ä»¶ getParent().requestDisallowInterceptTouchEvent(true); break; case MotionEvent.ACTION_MOVE: int endX = (int) ev.getRawX(); int disX = endX - startX; currentPosition = this.getCurrentItem(); //æœ€åä¸€é¡µä¸”å¾€å·¦æ»‘ï¼Œç”±çˆ¶Viewæ‹¦æˆªè§¦æ‘¸äº‹ä»¶ if (currentPosition == count - 1 &amp;&amp; disX &lt; 0) { //ç”³è¯·è®©çˆ¶Viewæ‹¦æˆªè§¦æ‘¸äº‹ä»¶ getParent().requestDisallowInterceptTouchEvent(false); } //ç¬¬ä¸€é¡µä¸”å³æ»‘ï¼Œç”±çˆ¶Viewæ‹¦æˆªè§¦æ‘¸äº‹ä»¶ else if (currentPosition == 0 &amp;&amp; disX &gt; 0) { //ç”³è¯·è®©çˆ¶Viewæ‹¦æˆªè§¦æ‘¸äº‹ä»¶ getParent().requestDisallowInterceptTouchEvent(false); } //å…¶ä»–æƒ…å†µï¼Œç”±è‡ªå·±æ‹¦æˆª else { //ç”³è¯·è®©çˆ¶Viewæ‹¦æˆªè§¦æ‘¸äº‹ä»¶ getParent().requestDisallowInterceptTouchEvent(true); } break; case MotionEvent.ACTION_UP: case MotionEvent.ACTION_CANCEL: getParent().requestDisallowInterceptTouchEvent(false); break; } return super.dispatchTouchEvent(ev); }} å…¶å®æ ¸å¿ƒæƒ³æ³•å°±æ˜¯ï¼Œå­ViewPager åœ¨éœ€è¦çš„æ—¶å€™è®© çˆ¶Viewpager æ‹¦æˆªè§¦æ‘¸äº‹ä»¶ å…³é”®è¯­å¥ï¼š 1getParent().requestDisallowInterceptTouchEvent(Boolean); ä½¿ç”¨ä½¿ç”¨æ–¹å¼å°±æŒ‰ä¸Šè¿°ç®€å•çš„æ€ç»´å¯¼å›¾æ¥åµŒå¥—å°±OKäº† æœ€å¤–å±‚ activity_main.xml 1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;.main.MainActivity&quot;&gt; &lt;androidx.viewpager.widget.ViewPager android:id=&quot;@+id/viewpager&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:layout_above=&quot;@+id/bottom_nav&quot;/&gt; &lt;com.google.android.material.bottomnavigation.BottomNavigationView android:id=&quot;@+id/bottom_nav&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_alignParentBottom=&quot;true&quot; android:background=&quot;#fcfcfc&quot; app:itemIconTint=&quot;@color/bottom_nav_color_selector&quot; app:itemTextColor=&quot;@color/bottom_nav_color_selector&quot; app:menu=&quot;@menu/nav_tab_menu&quot;/&gt;&lt;/RelativeLayout&gt; ç¬¬ä¸€å±‚ViewPager fragement_home.xml 1234567891011121314151617181920212223242526272829303132333435363738&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:fitsSystemWindows=&quot;true&quot; tools:context=&quot;XXX.XXX.XXX&quot;&gt; &lt;com.google.android.material.appbar.AppBarLayout android:id=&quot;@+id/appBar&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;&gt; &lt;androidx.appcompat.widget.Toolbar android:id=&quot;@+id/toolbar&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;?attr/actionBarSize&quot; app:layout_scrollFlags=&quot;enterAlways|scroll&quot; app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;/&gt; &lt;com.google.android.material.tabs.TabLayout android:id=&quot;@+id/tabs&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; app:tabIndicatorColor=&quot;@color/colorPrimary&quot; app:tabMode=&quot;scrollable&quot;/&gt; &lt;/com.google.android.material.appbar.AppBarLayout&gt; &lt;com.liuguoping.pretty_gank.gank.view.ChildViewPager android:id=&quot;@+id/viewpager&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:focusable=&quot;true&quot; app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; android:focusableInTouchMode=&quot;true&quot;/&gt;&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt; ç¬¬äºŒå±‚ViewPager fragment_home_tab.xml 123456789101112131415161718192021222324&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot; tools:context=&quot;XXX.XXX.XXX&quot;&gt; &lt;com.google.android.material.tabs.TabLayout android:id=&quot;@+id/tabs_child&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; app:tabIndicatorColor=&quot;@color/colorPrimary&quot; app:tabMode=&quot;scrollable&quot; /&gt; &lt;com.liuguoping.pretty_gank.gank.view.ChildViewPager android:id=&quot;@+id/viewpager_child&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:focusable=&quot;true&quot; android:focusableInTouchMode=&quot;true&quot; /&gt;&lt;/LinearLayout&gt; ç»§ç»­åµŒå¥—æœ€é‡Œå±‚çš„ RecycleView æ‰€åœ¨çš„ Fragment fragment_home_tab_list.xml 12345678910111213141516171819202122232425&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot;&gt; &lt;com.scwang.smartrefresh.layout.SmartRefreshLayout android:id=&quot;@+id/smartRefresh&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;com.scwang.smartrefresh.layout.header.ClassicsHeader android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot;/&gt; &lt;androidx.recyclerview.widget.RecyclerView android:id=&quot;@+id/rv_gank_list&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:padding=&quot;4dp&quot; /&gt; &lt;com.scwang.smartrefresh.layout.footer.ClassicsFooter android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot;/&gt; &lt;/com.scwang.smartrefresh.layout.SmartRefreshLayout&gt;&lt;/LinearLayout&gt; æ€»ç»“å°†æ§åˆ¶ çˆ¶ViewPager è§¦æ‘¸äº‹ä»¶çš„æ‹¦æˆªä¸å¦äº¤ç»™ å­ViewPager çš„å¥½å¤„æ˜¯è¿™æ ·å¯ä»¥çµæ´»å¤„ç†å½“å‰çš„æ»‘åŠ¨è§¦æ‘¸äº‹ä»¶ï¼Œä¸ç”¨æ‹…å¿ƒä¸‹ä¸€å±‚æ˜¯å¦ç»§ç»­åµŒå¥—äº†ViewPagerã€‚","link":"/2021/06/25/Android-%E5%A4%84%E7%90%86%E5%A4%9A%E5%B1%82Viewpager%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%81/"},{"title":"Android-è™šæ‹Ÿå¯¼èˆªé”®æ˜¾ç¤ºéšè—ç›‘å¬åŠè‡ªåŠ¨è®¾å®šé«˜åº¦","text":"è™šæ‹Ÿå¯¼èˆªé”®æ˜¾ç¤ºéšè—ç›‘å¬åŠè‡ªåŠ¨è®¾å®šé«˜åº¦é—®é¢˜æè¿°æŸäº›å‹å·åœ¨æŸäº›å¸ƒå±€ä¸‹ä½¿ç”¨è™šæ‹Ÿå¯¼èˆªæ ä¸èƒ½è‡ªåŠ¨è°ƒæ•´å¸ƒå±€ï¼Œå¯¼è‡´é®æŒ¡ã€‚ç‰¹åˆ«æ˜¯åä¸ºæ‰‹æœºã€‚ã€‚ã€‚ é—®é¢˜è§£å†³æ­¥éª¤ è·å–æ ¹å¸ƒå±€ è®¾ç½® ViewTree çš„å…¨å±€ç•Œé¢ç›‘å¬ å½“æ•è·åˆ°ç•Œé¢æ›´æ–°æ—¶ï¼Œå»åˆ¤æ–­è™šæ‹Ÿå¯¼èˆªé”®æ˜¯å¦å¼¹å‡ºæˆ–éšè—ç„¶ååšå‡ºç›¸åº”çš„æ“ä½œ å®ç°1. è·å–æ ¹å¸ƒå±€123456789101112131415161718192021public class MainActivity implements ViewTreeObserver.OnGlobalLayoutListener{//è™šæ‹Ÿå¯¼èˆªæ è‡ªé€‚åº”FrameLayout content;private boolean mLayoutComplete = false; ...@Overridepublic void onCreate(@Nullable Bundle savedInstanceState) { super.onCreate(savedInstanceState); content = (FrameLayout) findViewById(android.R.id.content);}//æ•è·ç•Œé¢ç›‘å¬@Overridepublic void onGlobalLayout() { ...} ...} 2. è®¾ç½®ç›‘å¬12345678910111213@Overridepublic void onCreate(@Nullable Bundle savedInstanceState) { super.onCreate(savedInstanceState); content = (FrameLayout) findViewById(android.R.id.content); content.post(new Runnable() { @Override public void run() { mLayoutComplete = true; LogUtils.d(&quot;content å¸ƒå±€å®Œæˆ&quot;); } }); content.getViewTreeObserver().addOnGlobalLayoutListener(this);} 3. æ•è·ç›‘å¬äº‹ä»¶å¹¶åšå‡ºè™šæ‹Ÿå¯¼èˆªæ˜¯å¦éšè—çš„ç›¸åº”æ“ä½œæ•è·ç›‘å¬123456@Overridepublic void onGlobalLayout() { LogUtils.d(&quot;onGlobalLayout&quot;); if (!mLayoutComplete) return; onNavigationBarStatusChanged();} è™šæ‹Ÿå¯¼èˆªæ˜¯å¦éšè—çš„ç›¸åº”æ“ä½œåœ¨è¿™é‡Œæˆ‘åˆ¤æ–­è™šæ‹Ÿå¯¼èˆªé”®æ˜¯å¦å¼¹å‡ºçš„ä¾æ®æ˜¯ å½“å‰å±å¹•çœŸå®é«˜åº¦ æ˜¯å¦å¤§äº å±å¹•é«˜åº¦ ã€‚ 123456789protected void onNavigationBarStatusChanged() { //è¿™é‡Œçš„æ“ä½œæ˜¯ä¸ºè™šæ‹Ÿå¯¼èˆªé”®ç•™å‡ºç›¸åº”é«˜åº¦ï¼Œä»¥é€‚åº”æŸäº›å‹å·åœ¨ä½¿ç”¨è™šæ‹Ÿå¯¼èˆªæ ä¸èƒ½è‡ªåŠ¨è°ƒæ•´å¸ƒå±€ï¼Œå¯¼è‡´é®æŒ¡ã€‚ if (ScreenUtils.getRealHeight() &gt; ScreenUtils.getHeight()) { getWindow().getDecorView().findViewById(android.R.id.content).setPadding(0, 0, 0,ScreenUtils.getNavigationBarHeight(this)); getWindow().setNavigationBarColor(Color.parseColor(&quot;#000000&quot;)); } else { getWindow().getDecorView().findViewById(android.R.id.content).setPadding(0, 0, 0, 0); }} 4.å…¶ä»–æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243public class ScreenUtils { /** * éå…¨é¢å±ä¸‹ è™šæ‹Ÿé”®é«˜åº¦(æ— è®ºæ˜¯å¦éšè—) * @param context * @return */ public static int getNavigationBarHeight(Context context){ int result = 0; int resourceId = context.getResources().getIdentifier(&quot;navigation_bar_height&quot;,&quot;dimen&quot;, &quot;android&quot;); if (resourceId &gt; 0) { result = context.getResources().getDimensionPixelSize(resourceId); } return result; } /** * è·å–æ‰‹æœºå±å¹•é«˜åº¦ */ public static int getHeight() { DisplayMetrics dm = new DisplayMetrics(); WindowManager windowManager = (WindowManager) BaseApplication.getInstance().getSystemService(Context.WINDOW_SERVICE); windowManager.getDefaultDisplay().getMetrics(dm); return dm.heightPixels; } /** * è·å–å±å¹•çœŸå®é«˜åº¦ï¼ˆåŒ…æ‹¬è™šæ‹Ÿé”®ç›˜ï¼‰ * */ public static int getRealHeight() { WindowManager windowManager = (WindowManager) BaseApplication.getInstance().getSystemService(Context.WINDOW_SERVICE); Display display = windowManager.getDefaultDisplay(); DisplayMetrics dm = new DisplayMetrics(); if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) { display.getRealMetrics(dm); } else { display.getMetrics(dm); } int realHeight = dm.heightPixels; return realHeight; } } æ€»ç»“ä»¥ä¸‹ä¸ºå°è£…ä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182/** * @ClassName: ScreenUtils * @Description: * @Author: pinguoooo * @Date: 2020/9/1 13:48 */public class ScreenUtils { /** * éå…¨é¢å±ä¸‹ è™šæ‹Ÿé”®é«˜åº¦(æ— è®ºæ˜¯å¦éšè—) * * @param context * @return */ public static int getNavigationBarHeight(Context context) { int result = 0; int resourceId = context.getResources().getIdentifier(&quot;navigation_bar_height&quot;, &quot;dimen&quot;, &quot;android&quot;); if (resourceId &gt; 0) { result = context.getResources().getDimensionPixelSize(resourceId); } return result; } /** * è·å–æ‰‹æœºå±å¹•é«˜åº¦ */ public static int getHeight() { DisplayMetrics dm = new DisplayMetrics(); WindowManager windowManager = (WindowManager) BaseApplication.getInstance().getSystemService(Context.WINDOW_SERVICE); windowManager.getDefaultDisplay().getMetrics(dm); return dm.heightPixels; } /** * è·å–å±å¹•çœŸå®é«˜åº¦ï¼ˆåŒ…æ‹¬è™šæ‹Ÿé”®ç›˜ï¼‰ */ public static int getRealHeight() { WindowManager windowManager = (WindowManager) BaseApplication.getInstance().getSystemService(Context.WINDOW_SERVICE); Display display = windowManager.getDefaultDisplay(); DisplayMetrics dm = new DisplayMetrics(); if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) { display.getRealMetrics(dm); } else { display.getMetrics(dm); } int realHeight = dm.heightPixels; return realHeight; } public interface NavigationListener { void show(); void hide(); } //è™šæ‹Ÿå¯¼èˆªæ æ˜¾ç¤º/éšè— public static void setNavigationListener(final View rootView, final NavigationListener navigationListener) { if (rootView == null || navigationListener == null) { return; } rootView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() { @Override public void onGlobalLayout() { if (ScreenUtils.getRealHeight() &gt; ScreenUtils.getHeight()) { //æ˜¾ç¤ºè™šæ‹ŸæŒ‰é”® if (navigationListener != null) { navigationListener.show(); } } else { //éšè—è™šæ‹ŸæŒ‰é”® if (navigationListener != null) { navigationListener.hide(); } } } }); }} æ³¨ï¼š åœ¨ä½¿ç”¨ setNavigationListener æ—¶ï¼Œä¼ å…¥çš„ rootView ä¸ºå¯¹åº”çš„ android.R.id.content å¸ƒå±€ï¼ˆFrameLayout ç±»å‹ï¼‰ï¼Œä¼ å…¥åˆ«çš„å¯èƒ½æ²¡æœ‰æ•ˆæœã€‚åœ¨è¿™é‡Œæˆ‘åˆ¤æ–­è™šæ‹Ÿå¯¼èˆªé”®æ˜¯å¦å¼¹å‡ºçš„ä¾æ®æ˜¯ å½“å‰å±å¹•çœŸå®é«˜åº¦ æ˜¯å¦å¤§äº å±å¹•é«˜åº¦ ã€‚ ä¹‹ååœ¨ä½¿ç”¨æ—¶åªéœ€è¦å¯¹å‡ºç°è™šæ‹Ÿå¯¼èˆªæ å‡ºç°è¦†ç›–é—®é¢˜çš„ Activity æ·»åŠ å¯¹ rootView çš„ç›‘å¬ï¼Œå³å¯æ–¹ä¾¿çš„å®ç°è™šæ‹Ÿå¯¼èˆªæ éšè—ä¸æ˜¾ç¤ºçš„ç›‘å¬ã€‚ 12345678910111213141516@Overridepublic void onCreate(@Nullable Bundle savedInstanceState) { super.onCreate(savedInstanceState); content = (FrameLayout) findViewById(android.R.id.content); ScreenUtils.setNavigationListener(content, new ScreenUtils.NavigationListener() { @Override public void show() { // è™šæ‹Ÿå¯¼èˆªæ æ˜¾ç¤ºçš„æ“ä½œ } @Override public void hide() { // è™šæ‹Ÿå¯¼èˆªæ éšè—çš„æ“ä½œ } });}","link":"/2021/06/25/Android-%E8%99%9A%E6%8B%9F%E5%AF%BC%E8%88%AA%E9%94%AE%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F%E7%9B%91%E5%90%AC%E5%8F%8A%E8%87%AA%E5%8A%A8%E8%AE%BE%E5%AE%9A%E9%AB%98%E5%BA%A6/"}],"tags":[{"name":"Android","slug":"Android","link":"/tags/Android/"},{"name":"PopupWindow","slug":"PopupWindow","link":"/tags/PopupWindow/"}],"categories":[{"name":"Android","slug":"Android","link":"/categories/Android/"},{"name":"View","slug":"Android/View","link":"/categories/Android/View/"}]}